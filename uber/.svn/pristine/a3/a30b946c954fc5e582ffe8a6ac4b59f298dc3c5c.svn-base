/**
 * 质量问题管理-提交问题-知会-人员选择窗口-部门列表Controller
 */
Ext.define('ExtApp.view.qualityissuemanagement.qesubmission.QeNotifySelectMemberTreeController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.qeNotifySelectMemberTree',

 // 点击菜单动作
    onSelectionchange: function(tree, node) {
		var refs = this.getReferences();
        var treeCard = refs.treeCardPanel;
        
        var lastView = treeCard.getLayout().getActiveItem();
        if (lastView != null) {
        	lastView.destroy();
        }

        var newView = Ext.create({
        	xtype: 'qeNotifySelectMemberGrid',
        	programId: this.getView().programId,
        	departmentId: node[0].get('id')
        });

        treeCard.add(newView);
        Ext.suspendLayouts();
        treeCard.getLayout().setActiveItem(newView);
        Ext.resumeLayouts(true);
	}
});