Ext.define('ExtApp.view.projectManagement.issue.archiveissue.ArchiveIssueWindow',{
	xtype:'archiveIssueWindow',
	extend:'Ext.window.Window',
	border:true,
	bodyStyle:'border:5px',
	cls:'shadow',
//	width:Ext.getBody().getViewSize().width,
//	height:Ext.getBody().getViewSize().height,
	
	maximized: true,
	
	// margin:'65 0 0 250',
	title:'问题归档',
	controller: 'archiveIssueForm',
	layout:{
		type:'border'
	},
	appId:0,
	record:null,
	initComponent: function() {
		var me = this;
//		var alertPanel = Ext.create('ExtApp.view.projectManagement.issue.raiseissue.AlertPanel');
		var archiveIssueInfoForm = Ext.create('ExtApp.view.projectManagement.issue.archiveissue.ArchiveIssueInfoForm',{programId:me.programId,region:'center',title:'问题信息'});
		var archiveIssueForm = Ext.create('ExtApp.view.projectManagement.issue.archiveissue.ArchiveIssueForm',{programId:me.programId,region:'east',width:'30%',title:'归档信息'});
//		var raiseIssueDocuments = Ext.create('ExtApp.view.projectManagement.issue.raiseissue.RaiseIssueDocuments');
		archiveIssueInfoForm.load({params:{issueId:me.issueId}});
		archiveIssueForm.load({params:{issueId:me.issueId}});
    	var notes = Ext.create('ExtApp.view.projectManagement.issue.solveissue.Notes',{issueId:me.issueId});
		var notesStore = Ext.create('ExtApp.store.projectmanagement.issue.solveissue.Notes');
		notes.setStore(notesStore);
		notesStore.load({params:{issueId:me.issueId}});
//		var alertPanel = Ext.create('AFC.view.application.da022.application.AlertPanel',{content:me.record.get('returnDescription')});
//		if('RESUBMIT' == status){
//			alertPanel.setHidden(false);
//		}else{
//			alertPanel.setHidden(true);
//		}
//		alertPanel.setHidden(true);
    	me.items = [{xtype:'container',
    		layout:{
    			type:'border'
    		},
    		region:'center',
    		items:[archiveIssueInfoForm, {
    			xtype: 'tabpanel',
				region:'east',
				width:'20%',
				border:true,
				items: [{
					xytpe:'panel',
					layout: 'fit',
					title:'问题进展',
					items:[notes]
				},{
					xtype: 'panel',
					layout: 'fit',
					title: '评审信息',
					items: [{
						xtype:'appraise',
						issueId: me.issueId
					}]
				}]
    		}]},archiveIssueForm
	 ];
    	
    	me.fbar=[
    	  	        { xtype: 'tbfill' },
      			{ type:'button', text:'完成归档',value:'SAVE',
      				listeners: {
      					click: 'onButtonClickSubmit'
      				}
    	  	    },
      			{ type:'button', text:'取消归档',value:'CLOSE',
      				listeners: {
      					click: 'closeWindow'
      				}
      			}
      	    ];
    	
    	
    	me.callParent(arguments);
 		
	}
});