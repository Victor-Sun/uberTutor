/**
 * 项目管理-模板导入
 */
Ext.define('ExtApp.view.projectmanagement.deploy.ProgramTemplateController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.programTemplate',

    // 导入模板-确定
    confirmImport: function(btn) {
    	var me = this;
        var form = this.view.down('form').getForm();
        if (form.isValid()){
        	me.view.mask('Please Waiting...');
            form.submit({
                clientValidation: true,
                url: '/pdms/pm/project-upload!importProjectTemplate.action',
                params: {
                	programVehicleId: me.view.programVehicleId,
                	model: Ext.encode(form.getFieldValues())                	
                },
                scope: me,
                success: function(form, action) {
                	me.view.unmask();
                	me.view.parentCaller.refreshView();
                	me.cancelImport();
                	ExtApp.util.Util.showToast("项目模板导入成功！");
                },
                failure: function(form, action) {
                	me.view.unmask();
                	ExtApp.util.Util.handleFormFailure(action);
                }
            });
        }
    },

    // 导入模板-取消
    cancelImport: function() {
    	this.view.close();
    }
});
