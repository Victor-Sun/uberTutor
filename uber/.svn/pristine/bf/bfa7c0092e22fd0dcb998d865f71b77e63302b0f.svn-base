/**
 * 项目管理-车型项目-交付物看板
 */
Ext.define('ExtApp.view.projectmanagement.vehicle.DeliverableStatusChartController', {
	extend: 'ExtApp.view.common.BaseViewController',
    alias: 'controller.deliverableStatusChart',
    
    // 初始化
    init: function() {
    	var me = this;
    	Ext.Ajax.request({
    		url:'/pdms/pm/vehicle-dashboard!getDeliverableStatusReport.action',
    		params: {
    			programVehicleId: me.view.programVehicleId
			},
			scope: me,
			success: function(response, opts) {
		    	var obj = Ext.decode(response.responseText);
    	        if (obj.success) {
    	        	if(me.view && me.view.query('#totalCnt')){
    	        		me.view.query('#totalCnt')[0].updateProgress(1, obj.data.totalCnt + '');
        	        	me.view.query('#submitedCnt')[0].updateProgress(obj.data.submitedRate, obj.data.submitedCnt + '');
        	        	me.view.query('#unsubmitCnt')[0].updateProgress(obj.data.unsubmitRate, obj.data.unsubmitCnt + '');
    	        	}
    	        } else {
    	        	ExtApp.util.Util.handleRequestFailure(response);
    	        }
		    },
			failure: function(response, opts) {
		    	ExtApp.util.Util.handleRequestFailure(response);
		    }
    	})
    }
});