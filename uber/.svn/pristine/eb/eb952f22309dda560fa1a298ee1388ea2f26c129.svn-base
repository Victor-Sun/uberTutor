/**
 * 部门管理-部门自建任务-论坛成员组件
 */
Ext.define('ExtApp.view.deptworkspace.deptissue.DeptIssueMember',{
	extend:'Ext.panel.Panel',
	xtype:'deptIssueMember',
	
	controller: 'deptIssueMember',
	margin: 10,
	
	initComponent:function() {
		var me = this;
		
		var imStore = Ext.create('ExtApp.store.deptworkspace.DeptIssueMemberStore');
		imStore.load({params:{issueId: me.issueId}});
		
		this.items = [{
			xtype:'fieldset',
	    	title: '<B>知会</B>',
			margin: '5 10 10 10',
			layout: 'fit',
	    	items:[{
	    		xtype: 'grid',
				cls: 'allRecordsCls',
				viewConfig: {
					preserveScrollOnRefresh: true,
					stripeRows: false
				},
				columnLines: true,
				flex: 1,
				store: imStore,
				columns: [{
					text: '用户',
					flex: 2,
					dataIndex: 'userName'
				},{
					text: 'Last Joined',
					flex: 1,
					dataIndex: 'createDate',
					xtype: 'datecolumn',
					formate:'Y-m-d'
				}],
				dockedItems: [{
					xtype: 'toolbar',
					dock: 'top',
					items: [{
						text: '增加',
						iconCls: 'x-fa fa-plus-circle',
						handler: 'addMember'
					},{
						iconCls: 'x-fa fa-refresh',
						handler: 'onResetClick'
					}]
				}]
	    	}]
		}];
		this.callParent();
	}
});