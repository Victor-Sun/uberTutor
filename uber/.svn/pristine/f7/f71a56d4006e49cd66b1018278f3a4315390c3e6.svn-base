/**
 * 质量问题管理-我的草稿-Controller
 */
Ext.define('ExtApp.view.qualityissuemanagement.qesubmission.MyDraftController',{
    extend: 'ExtApp.view.common.BaseViewController',
    alias: 'controller.myDraft'

//    onCelldblclick: function(grid, td, cellIndex, record, tr, rowIndex, e, eOpts) {
//    	var rec = grid.getStore().getAt(rowIndex);
//    	var refPanel = this.view;
//		for (var i = 0; i < refPanel.items.getCount(); i++) {
//			if (refPanel.items.get(i).title == rec.get('qeTitle')) {
//				refPanel.setActiveTab(refPanel.items.get(i));
//				return;
//			}
//		}
//    	var newView = Ext.create({
//    		xtype: 'submission',
//			closable:true
//        });
//    	newView.load({
//			url: '/pdms/ims/ims-issue!getImsIssueForm.action',
//			params: {issueId: rec.get('id')},
//			success: function(form, action) {
//		    	
//			}
//		});
//    	newView.setTitle(rec.get('qeTitle'));
//    	refPanel.add(newView);
//    	refPanel.setActiveTab(newView);
//    },
//    addColumns: function() {
//
//    	var refPanel = this.view.down('grid');
//    	var column = Ext.create('Ext.grid.column.Column', {text: 'aColumn'});
//    	refPanel.headerCt.insert(2, column);
//    	refPanel.getView().refresh();
//    },
//    // 删除草稿
//    deleteDraft: function(grid, rowIndex) {
//    	var me = this;
//    	var record = grid.getStore().getAt(rowIndex);
//    	Ext.MessageBox.confirm('提示', '您确定要删除该条记录吗?', function(btn) {
//    		// 提示信息点击【YES】则删除
//    		if (btn == 'yes') {
//    	    	Ext.Ajax.request({
//    	    		url:'/pdms/ims/my-draft!delMyDraft.action',
//    	    		params: {
//    	    			draftIdxId: record.data.id
//    				},
//    				scope: me,
//    				success: function(response, opts) {
//    					var obj = Ext.decode(response.responseText);
//    					if (obj.success) {
//    						grid.getStore().reload();
//        			    	ExtApp.util.Util.showToast("删除成功！");
//    			        } else {
//    			        	ExtApp.util.Util.handleRequestFailure(response);
//    			        }
//    			    },
//    				failure: function(response, opts) {
//    			    	ExtApp.util.Util.handleRequestFailure(response);
//    			    }
//    	    	})
//    		}
//    	});
//    }
});
