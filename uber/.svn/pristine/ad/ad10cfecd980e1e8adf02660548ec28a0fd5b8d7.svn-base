Ext.define('ExtApp.view.myworkspace.task.PmTaskTimeReport',{
	extend:'Ext.window.Window',
	xtype:'pmTaskTimeReport',
	
	width:410,
	height:235,
	
	closable: false,
	modal: true,
	
	title:'汇报进度',
	
	controller: 'pmTaskTimeReport',
	
	layout:{
		type:'vbox',
		align: 'stretch'
	},
	
	initComponent: function() {
		// 进展状态
		var progressStore = Ext.create(
			'ExtApp.store.common.CodeTableStore');
		progressStore.getProxy().extraParams = {
			type: 'TASK_PROGRESS_STATUS',
			exceptCode: 'TASK_PROGRESS_STATUS_GREY'};
		progressStore.load();
		
		this.items = [{
			xtype: 'form',
			layout: 'column',
			defaults: {
		    	labelAlign: 'right',
		    	margin:2
		    },
		    margin:'20 20 0 0',
		    items: [{
				xtype: 'panel',
				columnWidth:1,
				layout: 'column',
				items:[{
					xtype:'displayfield',
					fieldLabel:'汇报周期',
					labelSeparator: '',
					columnWidth:0.2,
					margin:2,
					labelAlign: 'right'
				},{
					xtype: 'datefield',
					columnWidth:0.3,
					margin:2,
					readOnly: true,
					fieldCls: 'text-readonly',
					format: 'Y/m/d',
					name: 'reportFrom'
				},{
					columnWidth:0.1,
					margin:2,
					html:'<center><span style="font-size:20px;">&#126;</span></center>'
				},{
					xtype: 'datefield',
					columnWidth:0.3,
					margin:2,
					format: 'Y/m/d',
					name: 'reportTo',
					allowBlank: false
				}]
			},{
				xtype: 'combobox',
				columnWidth:1,
				fieldLabel:'风险状态',
		    	editable: false,
				store: progressStore,
			    queryMode: 'local',
			    displayField: 'name',
			    valueField: 'code',
			    name: 'taskProgressStatusCode',
			    allowBlank: false
			},{
				xtype: 'numberfield',
				columnWidth:0.45,
				fieldLabel: '完成率',
				name: 'percentComplete',
				minValue: 0,
				maxValue: 100,
				decimalPrecision: 0,
				allowBlank: false
				//readOnly: true,
				//fieldCls: 'text-readonly'
			},{
				xtype: 'displayfield',
				columnWidth:0.05,
				value: '%'
			},{
				xtype: 'numberfield',
				columnWidth:0.4,
				fieldLabel: '工时',
				name: 'manHours',
				minValue: 0,
				maxValue: 99999999,
				decimalPrecision: 2,
				allowBlank: false
			},{
				xtype: 'displayfield',
				columnWidth:0.1,
				value: '小时'
			},{
				xtype: 'textareafield',
				columnWidth:1,
				fieldLabel: '备注',
				name: 'remark',
				maxLength: 1024
			}]
		}];
		
		this.tools = [{
			text:'保存',
	        xtype: 'button',
	        iconCls: 'x-fa fa-save',
	        handler: 'saveReport'
	    },{
			text:'关闭',
	        xtype: 'button',
	        iconCls: 'x-fa fa-close',
	        handler: 'closeWindow'
		}];
		
		this.callParent();
	}
});