/**
 * 项目管理-车型信息Tab
 */
Ext.define('ExtApp.view.projectmanagement.base.ProjectDBStatusReportHomePageController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.projectDBStatusReportHomePage',

    // 初始化
    init: function() {
    	var me = this;
    	
    	// 显示状态报告页面时，需要判断查看权限
    	if (ExtApp.util.Util.getPrivilege('P0101', me.view.projectPrivilege)) {
    		var report = Ext.create({
    			xtype: 'projectDBStatusReport',
            	title: me.view.record.get('vehicleName') + '状态报告',
            	programVehicleId: me.view.programVehicleId,
            	programId: me.view.programId,
            	projectPrivilege: me.view.projectPrivilege
    		});
    		me.view.add(report);
    		me.view.setActiveTab(report);
    	}
		
    	// 显示车型基本信息页面时，需要判断查看权限
    	if (ExtApp.util.Util.getPrivilege('P0103', me.view.projectPrivilege)) {
    		var vehicleInfo = Ext.create({
    			title:'基本信息',
        		xtype:'vehicleBaseInfo',
        		programVehicleId: me.view.programVehicleId
    		});
    		me.view.add(vehicleInfo);
    		if (! me.view.getActiveTab()) {
    			me.view.setActiveTab(vehicleInfo);
    		}
    	}
    }
});
