Ext.define('ExtApp.view.common.TransferTaskWindow',{
	xtype:'transferTaskWindow',
	extend:'Ext.window.Window',
	width:500,
	height:250,
	// margin:'65 0 0 250',
	title:'任务移交',
	scrollable:'y',
	callback:null,
	layout:{
		type:'vbox',
		align:'stretch'
	},
	initComponent: function() {
		me = this;
		var pmStore = Ext.create('Ext.data.Store', {
		    fields: ['id', 'name'],
		    proxy: {
		    	type: 'ajax',
		    	url: '/pdms/workorder/workorder!getUserList.action',
		        reader: {
		            type: 'json',
		            rootProperty: 'data'
		        }
		    },
			autoLoad:true
		});
		
		// Create the combo box, attached to the states data store
		var userTo = Ext.create('Ext.form.ComboBox', {
		    fieldLabel: '接收人',
		    store: pmStore,
		    name:'userTo',
		    queryMode: 'local',
		    displayField: 'name',
		    allowBlank:false,
		    forceSelection:true,
		    valueField: 'id',
		    width:'90%',
		    padding:'10 25 10 30'
		});
		me.items = [{
		    xtype:'form',
		    reference: 'commentForm',
		    width: 200,
		    items: [userTo,{
				xtype:'textarea',
				name:'commont',
				padding:'10 25 10 30',
				width:'90%',
				fieldLabel:'备注'
			}]
		}];	
    	me.fbar = [
    				{ type:'button', text:'确认',
    					handler: function() {
    						var commont = me.down('form').getForm().findField('commont').getValue();
    						var userTo = me.down('form').getForm().findField('userTo').getValue();
    						if (typeof me.callback == "function"){
    				            me.callback(commont,userTo);
    				        }
    					}
    				}
    		];
    	me.callParent(arguments);  		
	}
});