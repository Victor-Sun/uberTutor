/*
* 通知提醒View
*/
Ext.define('ExtApp.view.myworkspace.notity.NotifyList',{
	extend:'Ext.container.Container',
	xtype:'notifyList',
	
	controller: 'notifyList',
	cls: 'notify-list shadow',
//	margin: 20,
	layout: 'fit',
	
	initComponent: function() {
		var me = this;
		var notifyStore = Ext.create('ExtApp.store.myworkspace.NotifyListStore');
		notifyStore.getProxy().extraParams = {
			searchUnopen: true,
			searchOpened: false
		};
		notifyStore.load();
	
		this.items = [{
			xtype:'tabpanel',
			layout: 'fit',
			cls:'shadow',
			items:[{
				xtype: 'grid',
				hideHeaders: true,
				store: notifyStore,
				selModel: {
//		        	type: 'spreadsheet',
			        checkboxSelect: true
//			        cellSelect: false,
//			        mode: 'SIMPLE'
			    },
				title:'通知提醒',
				columns:[{
					xtype: 'templatecolumn',
					flex: 1,
					tpl:'<div class="text-wrapper">'+
							'<div class="{isNewCls}"></div>'+
							'<div class="{isNewClsOne}">'+
						        '<div class="notify-content">'+
									'<div class="notify notify-header">'+
										'<span class="notify-author"><i class="fa fa-user"></i>&nbsp;{noticeSourceName}&nbsp;</span>'+
										'<span class="notify-step"><i class="fa fa-info"></i>&nbsp;{title}&nbsp;</span>'+
										'<span class="notify-time"><i class="fa fa-calendar "></i>&nbsp;{createDate}</span>'+
									'</div>'+
									'<div class="notify-paragraph">'+
										'<span>{content}</span>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div>'
//					text:'标题',
//					flex: 1,
//					dataIndex:'title',
//					renderer: 'renderNotity'
//				},{
//					text:'来源',
//					flex: 1,
//					dataIndex:'noticeSourceName',
//					renderer: 'renderNotity'
//				},{
//					text:'内容',
//					flex: 1,
//					dataIndex:'content',
//					renderer: 'renderNotity'
				}],
				dockedItems: [{
					xtype: 'toolbar',
					dock: 'top',
					items: [{
						xtype: 'form',
				    	margin: 2,
				    	layout:{
							type:'hbox',
							align:'stretch'
						},
						width: '100%',
						items: [{
//							xtype:'button',
//							itemId: 'btnSetRiskLevel',
//							text:'标记为已读',
//							iconCls: 'x-fa fa-flag',
//							handler:'setOpened'
//						},{
//							xtype: 'button',
//							margin: '0 20 0 5',
//							text: '删除',
//							iconCls: 'x-fa fa-minus-circle',
//							handler: 'deleteMails'
//						},{
							xtype:'checkbox',
							name:'searchOpened',
							checked: false,
							labelWidth: 30,
							labelSeparator: '',
							fieldLabel:'已读',
							listeners:{
					        	change: 'search'
							}
						},{
							xtype:'checkbox',
							name:'searchUnopen',
							checked: true,
							margin: '0 0 0 5',
							labelWidth: 30,
							labelSeparator: '',
							fieldLabel:'未读',
							listeners:{
					        	change: 'search'
							}
						}]
					}]
				},{
				     xtype: 'pagingtoolbar',
				     dock: 'bottom',
				     displayInfo: true,
				     store: notifyStore
				}],
				listeners:{
		        	celldblclick: 'onCelldblclick'
				}
//				tbar: [{
//					
//				}]
			}]
		}];
		this.callParent();
	}
});