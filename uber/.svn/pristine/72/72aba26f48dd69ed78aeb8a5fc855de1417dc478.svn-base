/**
 * 项目管理-项目计划-计划节点/活动信息-时程表设置
 */
Ext.define('ExtApp.view.projectManagement.deptplan.DeptPlanFunction',{
	extend:'Ext.panel.Panel',
	xtype:'deptPlanFunction',
	
	controller: 'deptPlanFunction',
	
	layout: 'fit',
	
	initComponent: function() {
		var me = this;
		
		var deptStore = Ext.create('ExtApp.store.projectmanagement.DeptPlanTreeStore');
		deptStore.getProxy().extraParams = {
			programVehicleId: me.programVehicleId,
			planId: me.record.get('planId'),
			obsId: me.record.get('fnGroupId'),
			baselineId: me.baselineId};
		deptStore.load();
		
		me.items = [{
			xtype:'treepanel',
			lines: false,
			scrollable:'y',
			rootVisible: false,
            store:deptStore,
            viewConfig: {
                plugins: {
                    ptype: 'treeviewdragdrop',
                    dragText: '请拖动至要显示的位置'
                }
            },
			listeners:{
				itemclick: 'onItemclick',
				itemcontextmenu: 'onItemcontextmenu',
				drop: 'onDrop'
			}
		}];
		me.tbar = [{
			text: '添加',
			iconCls: 'x-fa fa-plus-circle',
			handler: 'addFunction'
		}];
		me.callParent();
	}
});