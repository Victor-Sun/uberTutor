/**
 * 质量问题管理-仪表盘-总体情况
 */
Ext.define('ExtApp.view.qualityissuemanagement.qedashboard.QMSDashboardGeneral',{
	extend:'Ext.form.Panel',
	xtype:'qmsdashboardgeneral',

    controller: 'barStacked',
    viewModel: 'barStacked',

	cls:'shadow',
	margin: 20,
	width: 650,
	minHeight:150,

	layout:{
		type:'vbox',
		align:'stretch'
	},

    initComponent: function() {
        var me = this;
		var store = Ext.create('ExtApp.store.qualityissuemanagement.QMSGeneralStore');
		store.load();

        me.items = [{
        	xtype:'panel',
        	margin:10,
        	layout: 'column',
        	items:[{
        		xtype:'displayfield',
            	labelAlign: 'right',
				fieldLabel:'问题总数',
				columnWidth: 0.14,
				readOnly:true,
				name:'totalCount'
        	},{
        		xtype:'displayfield',
            	labelAlign: 'right',
				fieldLabel:'分析中',
				columnWidth: 0.14,
				readOnly:true,
				name:'continueFollow'
        	},{
        		xtype:'displayfield',
            	labelAlign: 'right',
				fieldLabel:'对策决定',
				columnWidth: 0.14,
				readOnly:true,
				name:'PreShutdown'
        	},{
        		xtype:'displayfield',
            	labelAlign: 'right',
				fieldLabel:'关闭',
				columnWidth: 0.14,
				readOnly:true,
				name:'shutdown'
        	}]
        },{
        	xtype:'panel',
        	margin:10,
        	layout:{
        		type:'hbox'
        	},
        	items:[{
        		xtype:'displayfield',
            	margin:'0 50 0 0',
            	labelAlign: 'right',
				fieldLabel:'总关闭率',
				readOnly:true,
				name:'totalClosureRate'
        	},{
        		xtype: 'cartesian',
                reference: 'chart',
                width: '50%',
                height: 40,
    			store: store,
                flipXY: true,
                axes: [{
                    type: 'numeric',
                    position: 'bottom',
                    hidden:true,
                    adjustByMajorUnit: true
                }, {
                    type: 'category',
                    hidden:true,
                    position: 'left'
                }],
                series: [{
                    type: 'bar',
                    axis: 'bottom',
                    title: [ '关闭', '预关闭', '分析中' ],
                    xField: 'total',
                    yField: [ 'data1', 'data2', 'data3' ],
                    stacked: true,
                    style: {
                        opacity: 0.80
                    },
                    highlight: {
                        fillStyle: 'yellow'
                    },
                    tooltip: {
                        trackMouse: true,
                        renderer: 'onSeriesTooltipRender'
                    }
                }]
        	}]
        }];

        this.callParent();
    }
});