//问题处理 - 专业经理处理工联单
Ext.define('ExtApp.view.workorder.outbound.WorkOrderOutboundStep2',{
	xtype:'workorderoutboundstep2',
	extend:'Ext.window.Window',

	maximized: true,
	header: false,
	scrollable:'y',
	layout: {
		type: 'border'
	},
	controller: 'workOrderOutbound',
	initComponent: function() {
		var me = this;
		var workOrderDocuments = Ext.create('ExtApp.view.workorder.common.WorkOrderDocuments',{workOrderId:me.workOrderId});
		workOrderDocuments.setReadOnly();
		var navImageName = '';
		if(me.record == null){
			navImageName = 'OpenIssueRaise.png';
		}else{
			navImageName = me.record.get('navImageName');
		}
		me.items = [{
			//west
			xtype: 'form',
			reference: 'workOrderOutbandForm',
			region: 'center',
			layout: {
				type: 'vbox',
				align: 'stretch'
			},
			items: [{
				xtype: 'workorderbasicinfo'
			},{
				xtype: 'tabpanel',
				flex: 1,
				items:[{
					title:'需求',
					xtype: 'workorderapprovalpanel'
				},workOrderDocuments]
			}],
			dockedItems: [{
				xtype: 'panel',
				cls: 'shadow',
				dock: 'top',
				items: [{
					xtype: 'toolbar',
					style:{
						backgroundColor: '#3892d4'
					},
		        	cls: 'shadow',
			        dock: 'top',
			        items: [
			        '->',
			        {
			            xtype: 'button',
//			            iconCls: 'x-fa fa-print',
			            text: '<b><i style="font-style: normal;" class="x-fa fa-search"></i>&nbsp;/&nbsp;<i style="font-style: normal;" class="x-fa fa-print"></i></b>',
			            tooltip: '预览 / 打印',
			            handler:function(){
			            	ExtApp.util.Util.openReport('rpt=pm/inbound_work_order.brt&xlsbtn&params=work_order_id='+me.workOrderId);
			            }
			        }]
				}]
	        }]
		},{
			title: '审批信息',
			region: 'east',
			width: '30%',
			workOrderId:me.workOrderId,
			xtype: 'workOrderNotes'
		}];
		this.dockedItems = [{
			xtype: 'panel',
			cls: 'shadow',
			dock: 'top',
			items: [{
				xtype: 'toolbar',
				cls: 'workorder',
	        	padding: '0 6 0 2',
		        items: [{
		            xtype: 'workflowStep',
		            navImageName:navImageName
		        },
		        '->',
		        {
		        	xtype: 'button',
		        	iconCls: 'x-fa fa-close',
		        	tooltip: '关闭',
		        	style: {
		        		borderRadius: 20
		        	},
		        	handler: function() {
		        		me.close();
		        	}
		        }
		        ]
//			},{
//				xtype: 'toolbar',
//				height: 30,
//				cls: 'workorder',
//				items: [{
////					xtype: 'component',
////					html: 'information toolbar'
//				}]
			}]
        },{
			xtype: 'toolbar',
			cls: 'shadow',
	        dock: 'bottom',
	        items: ['->',{
	        	type:'button', 
	            text: '办理',
	            listeners: {
					click: 'processOutboundStep'
				}
	        }]
		}];   
		me.callParent(arguments);
    }
});