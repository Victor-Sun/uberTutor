/**
 * 项目管理-修改文件夹
 */
Ext.define('ExtApp.view.projectManagement.document.ModifyFolder',{
	extend:'Ext.window.Window',
	xtype:'modifyFolder',

	controller:'modifyFolder',

	modal: true,
	closable: false,
	
	layout:{
		type:'vbox',
  		align:'stretch'
  	},
	
	width: 400,
	height: 550,
	
	title: '修改文件夹',
	
	initComponent: function() {
		var me = this;
		
		var privilegeStore = Ext.create(
			'ExtApp.store.projectmanagement.FolderPrivilegeStore');
		privilegeStore.getProxy().extraParams = {
			folderId: me.folderId
		};
		privilegeStore.load();

		this.items = [{
			xtype:'fieldset',
			layout: 'fit',
			height: 100,
			margin:10,
	    	title: '基本信息',
	    	collapsible:'true',
	    	items: [{
	    		xtype: 'form',
	    		margin:2,
	    		layout: 'column',
				items: [{
					xtype: 'textfield',
					columnWidth: 1,
					name: 'folderName',
					fieldLabel: '文件夹名称',
					labelAlign: 'right',
					allowBlank:false,
					maxLength:20,
					value: me.folderName
				}],
				tbar: ['->',{
			    	xtype:'button',
					text:'保存',
					iconCls: 'x-fa fa-save',
					handler: 'saveFolderInfo'
			    }]
	    	}]
		},{
			xtype:'fieldset',
			layout: 'fit',
			flex:1,
			margin:10,
	    	title: '权限信息',
	    	collapsible:'true',
	    	items: [{
	    		xtype: 'panel',
	    		layout: 'fit',
				items: [{
					xtype:'grid',
					margin:2,
			        store: privilegeStore,
	                columns: [{
						xtype: 'rownumberer'
					},{
				    	text: '项目成员',
				    	flex: 1,
				    	dataIndex: 'userName'
				    },{
				    	text: '管理', 
				    	itemId: 'ccManage',
				    	xtype: 'checkcolumn',
				    	width: 50,
				    	dataIndex: 'ownerPrivilege',
				    	listeners: {
				    		checkchange: 'onCheckchange'
				    	}
				    },{
				    	text: '读取',
				    	itemId: 'ccRead',
				    	xtype: 'checkcolumn',
				    	width: 50,
				    	dataIndex: 'readPrivilege',
				    	listeners: {
				    		checkchange: 'onCheckchange'
				    	}
				    },{
				    	text: '写入',
				    	itemId: 'ccWrite',
				    	xtype: 'checkcolumn',
				    	width: 50,
				    	dataIndex: 'writePrivilege',
				    	listeners: {
				    		checkchange: 'onCheckchange'
				    	}
		            }],
		            tbar: ['->',{
	  	            	text: '添加人员',
	  	            	iconCls: 'fa fa-user',
	  	            	handler: 'selUser'
	  	            }]
				}]
	    	}]
		}];
		this.tools = [{
			text:'关闭',
			xtype: 'button',
			iconCls: 'x-fa fa-close',
			handler: 'close'
		}];
		this.callParent(arguments);
	}
});