Ext.define('ExtApp.view.workorder.WorkOrderForm',{
	xtype:'workorderform',
	extend:'Ext.form.Panel',
	reference: 'workorderform',
	initComponent: function() {
		var me = this;
		var issueSourceStore = Ext.create('Ext.data.Store', {
		    fields: ['id', 'name'],
		    proxy: {
		    	type: 'ajax',
		    	url: '/pdms/workorder/workorder!getWorkOrderList.action',
		        reader: {
		            type: 'json',
		            rootProperty: 'data'
		        }
		    },
		    autoLoad: true
		});
		
		// Create the combo box, attached to the states data store
		var issueSource = Ext.create('Ext.form.ComboBox', {
		    fieldLabel: '问题来源',
		    store: issueSourceStore,
		    name:'issueSourceId',
		    queryMode: 'local',
		    displayField: 'name',
		    allowBlank:false,
		    valueField: 'id',
		    padding:'10 25 10 30',
		    labelAlign: 'top'
		});
		
		me.items = [{
			xtype:'panel',
			layout:{
				type:'vbox',
				align:'stretch'
			},
			items:[{
				xtype:'panel',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
					xtype: 'textfield',
					fieldLabel: '发文单位',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				},{
					xtype: 'textfield',
					fieldLabel: '收文单位',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				}]
			},{
				xtype:'panel',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
					xtype: 'textfield',
					fieldLabel: '所属项目',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				},{
					xtype: 'textfield',
					fieldLabel: '工作类别',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				}]
			},{
				xtype:'panel',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
					xtype: 'textfield',
					fieldLabel: '工作名称',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				},{
					xtype: 'textfield',
					fieldLabel: '编制',
					labelWidth: 130,
					name: 'title',
					padding:'10 25 10 30',
					labelAlign: 'top'
				}]
			},{
					xtype:'panel',
				layout:{
					type:'vbox',
					align:'stretch'
				},
				items:[{
					xtype:'textarea',
					name:'issueDescription',
					padding:'10 25 0 30',
					labelAlign:'top', 
					minWidth:650,
					enforceMaxLength:true,
					maxLength:500,
					bind: '{value}',
					fieldLabel:'具体内容及要求（最多500个字符）'
				}]
			}]
		}];
		me.callParent(arguments);
	}
});