/**
 * 个人管理-已办任务列表
 */
Ext.define('ExtApp.view.myworkspace.donepm.DoneListPM',{
	extend:'Ext.panel.Panel',
	xtype:'doneListPM',

	controller: 'doneListPM',
	layout: 'fit',

	initComponent: function() {
		var store = Ext.create(
			'ExtApp.store.myworkspace.DoneListPMStore');
		store.load();

		this.items = [{
			xtype: 'grid',
			scrollable:'y',
			store: store,
			columns:[{
				xtype: 'rownumberer'
			},{
				dataIndex:'attCnt',
				renderer: 'renderAttachment',
				align: 'center',
				width: 35,
				filter: false
			},{
				text:'任务名称',
				dataIndex:'taskName',
				flex: 1
			},{
				text:'任务类型',
				dataIndex:'taskTypeName',
				flex: 1
			},{
				text:'所属项目',
				dataIndex:'programCode',
				flex: 1
			},{
				text:'延期天数',
				dataIndex:'delayDays',
				flex: 1,
				filter: {
					type: 'number'
				}
			},{
				text:'责任人',
				dataIndex:'taskOwnerName',
				flex: 1
			},{
				text:'当前任务负责人',
				dataIndex:'currentTaskOwner',
				flex: 1
			},{
				text:'发布人',
				dataIndex:'publishByName',
				flex: 1
			},{
				text:'最近更新时间',
				dataIndex:'lastReportDate',
				formatter: 'date("Y/m/d")',
				flex: 1,
				filter: {
					type: 'date'
				}
			},{
				text:'计划完成时间',
				dataIndex:'plannedFinishDate',
				formatter: 'date("Y/m/d")',
				flex: 1,
				filter: {
					type: 'date'
				}
			},{
				text:'实际完成时间',
				dataIndex:'actualFinishDate',
				formatter: 'date("Y/m/d")',
				flex: 1,
				filter: {
					type: 'date'
				}
			}],
			tbar:[{
				xtype : 'numberfield',
				fieldLabel : '近',
				reference:'searchVal',
				labelAlign: 'right',
				labelWidth: 10
			},{
				xtype: 'combobox',
				editable: false,
				store:[[0,'天'],[1,'周'],[2,'月'],[3,'季'],[4,'年']],
			    queryMode: 'local',
			    displayField: 'name',
			    valueField: 'id',
			    reference: 'searchItem'
			},{
				xtype: 'displayfield',
				value: '完成的任务'
			},'-',{
				text: '查询',
				iconCls: 'x-fa fa-search',
				handler: 'search'
			},{
				text: '重置',
				iconCls: 'x-fa fa-rotate-left',
				handler: 'reloadSearch'
			}],
			dockedItems: [{
			     xtype: 'pagingtoolbar',
			     dock: 'bottom',
			     displayInfo: true,
			     store: store
			}],
			listeners:{
	        	celldblclick: 'onCelldblclick'
			}
		}];
		this.callParent();
	}
});