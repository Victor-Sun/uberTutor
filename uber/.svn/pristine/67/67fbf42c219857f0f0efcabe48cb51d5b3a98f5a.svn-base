/**
 * ViewController
 */
Ext.define('ExtApp.view.common.BaseViewController',{
    extend: 'Ext.app.ViewController',
    alias: 'controller.base',

    // 可点击Column
    renderLink: function(v) {
    	if (v && v != null) {
    		return v + '<img align="right" src="resources/images/icons/view.png" width="20px"/>';
    	}
    	return '<img align="right" src="resources/images/icons/view.png" width="20px"/>';
    },
    
    // 附件
    renderFileLink: function(value) {
    	if (value) {
			return '<font color="blue"><u>' + value + '</u></font>';
		}
    	return '';
    },
    
    // 任务进展状态/交付物进展状态 对应图片取得
    getProgressImage: function(statusCode) {
    	var img = 'Gray.png';
    	if (statusCode == 'TASK_PROGRESS_STATUS_G') {
    		img = 'Green.png';
    	} else if (statusCode == 'TASK_PROGRESS_STATUS_GY') {
    		img = 'GreenYellow.png';
    	} else if (statusCode == 'TASK_PROGRESS_STATUS_Y') {
    		img = 'Yellow.png';
    	} else if (statusCode == 'TASK_PROGRESS_STATUS_R') {
    		img = 'Red.png';
    	} else if (statusCode == 'TASK_PROGRESS_STATUS_B') {
    		img = 'Blue.png';
    	}
    	return img;
    },
    
    // 任务进展状态
    renderTaskProgress: function(statusCode) {
        return '<img src="resources/images/'
        				+ this.getProgressImage(statusCode) + '" width="20px"/>';
    },
    
    // 任务进展状态(阀门交付物)
    renderTaskProgressSmall: function(statusCode) {
        return '<img src="resources/images/'
        				+ this.getProgressImage(statusCode) + '" width="15px"/>';
    },

    // 附件
    renderAttachment: function(v) {
    	var value = parseInt(v, 10);
    	if (value > 0) {
    		return '<img src="resources/images/attachment.png" width="20px"/>';
    	}
    	return '';
    },
	
	// 附件(阀门交付物)
    renderAttachmentSmall: function(v) {
    	var value = parseInt(v, 10);
    	if (value > 0) {
    		return '<img src="resources/images/attachment.png" width="15px"/>';
    	}
    	return '';
    },
    
    // 阀门状态
    renderGateProgress: function(v) {
    	var img = 'Gray.png';
    	if (v == 'GATE_STATUS_GRAY') {
    		img = 'Gray.png'
    	} else if (v == 'GATE_STATUS_GREEN') {
    		img = 'Green.png'
    	} else if (v == 'GATE_STATUS_YELLOW') {
    		img = 'Yellow.png'
    	} else if (v == 'GATE_STATUS_RED') {
    		img = 'Red.png'
    	}
        return '<img src="resources/images/' + img + '" width="20px"/>';
    },

    // 项目状态
    renderReportStatus: function(v) {
	    return '<img src="resources/images/' + this.getReportStatusImg(v) + '" width="20px"/>';
    },
    
    // 项目状态图片取得
    getReportStatusImg: function(v) {
    	var img = 'Green.png';
		if (v == 'PROGRAM_REPORT_STATUS_G') {
			img = 'Green.png'
		} else if (v == 'PROGRAM_REPORT_STATUS_GY') {
			img = 'GreenYellow.png'
		} else if (v == 'PROGRAM_REPORT_STATUS_Y') {
			img = 'Yellow.png'
		} else if (v == 'PROGRAM_REPORT_STATUS_YR') {
			img = 'YellowRed.png'
		} else if (v == 'PROGRAM_REPORT_STATUS_R') {
			img = 'Red.png'
		}
	    return img;
    },
    
    // 质量问题风险等级状态
    renderRiskStatus: function(v) {
		img = 'Gray.png'
		if (v == 'RISK_LEVEL_1') {
			img = 'Red.png'
		} else if (v == 'RISK_LEVEL_2') {
			img = 'YellowRed.png'
		} else if (v == 'RISK_LEVEL_3') {
			img = 'Yellow.png'
		}
	    return '<img src="resources/images/' + img + '" width="20px"/>';
    },
    
	// 备注自动换行
	renderRemark: function(value, meta, record) {
        meta.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:20px;';   
        return value;
	},
   
	renderIssueProgress: function(v) {
	   	var img = this.getIssueProgressImg(v);
	   	return '<img src="resources/images/' + img + '" width="20px"/>';
	},
   
   	// 取得Issue进展状态图片
	getIssueProgressImg: function(v) {
		var img = 'Gray.png';
		if (v == 'GREEN') {
			img = 'Green.png'
		} else if (v == 'YELLOW') {
			img = 'Yellow.png'
		} else if (v == 'RED') {
			img = 'Red.png'
		}
	    return img;
   },
	
   	// new图片
	isNew: function(v) {
		var img = '<img src="resources/images/new-icon.png" width="20px"/>';
		if (v == 'Y') {
			return img;
		}
	    return '';
   }
});
