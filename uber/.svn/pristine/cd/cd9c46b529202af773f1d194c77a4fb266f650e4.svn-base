Ext.define('ExtApp.view.workorder.WorkOrderBasicInfo',{
	extend:'Ext.container.Container',
	xtype: 'workorderbasicinfo',
	initComponent: function() {
		var me = this;
		var workOrderWorkTypeStore = Ext.create('Ext.data.Store', {
		    fields: ['id', 'name'],
		    proxy: {
		    	type: 'ajax',
		    	url: '/pdms/workorder/workorder!getWorkOrderWorkTypeList.action',
		        reader: {
		            type: 'json',
		            rootProperty: 'data'
		        }
		    },
		    autoLoad: true
		});
		
		// Create the combo box, attached to the states data store
		var workOrderWorkType = Ext.create('Ext.form.ComboBox', {
		    fieldLabel: '工作类别',
		    store: workOrderWorkTypeStore,
		    name:'workType',
		    queryMode: 'local',
		    displayField: 'name',
		    allowBlank:false,
		    forceSelection:true,
		    valueField: 'id',
		    padding:'10 25 10 30',
		    labelAlign: 'top'
		});
		
		me.items = [{
			xtype: 'fieldset',
			margin: 10,
			title: '基本信息',
			layout: {
				type: 'vbox'
//				align: 'stretch'
			},
			items: [{
		        xtype:'hiddenfield', 
		        name: 'id'
			},{
				xtype: 'textfield',
				width: 530,
				labelAlign: 'top',
				name:'title',
				allowBlank:false,
				fieldLabel: '工作名称'
			},{
				xtype: 'container',
				defaults: {
					margin: '0 10 5 0'
				},
		        layout: {
		            type: 'hbox',
		            align: 'stretch'
		        },
		        defaults: {
		        	labelAlign: 'top',
		        	margin: '0 10 5 0'
		        },
		        items: [{
		            xtype: 'textfield',
		            margin: '0 10 5 0',
		            name:'sourceDept',
		            allowBlank:false,
		            fieldLabel: '发文单位'
		        },{
		            xtype: 'textfield',
		            name:'targetDept',
		            allowBlank:false,
		            fieldLabel: '收文单位'
		        },{
		            xtype: 'textfield',
		            name:'programName',
		            allowBlank:false,
		            fieldLabel: '所属项目'
		        },workOrderWorkType]
		    },{
		        xtype: 'container',
		        layout: {
		            type: 'hbox',
		            align: 'stretch'
		        },
		        defaults: {
		        	labelAlign: 'top',
		        	margin: '0 10 5 0'
		        },
		        items: [{
		            xtype: 'datefield',
		            name:'dueDate',
		            format:'Y-m-d',
		            allowBlank:false,
		            fieldLabel: '要求完成时间'
		        },{
		            xtype: 'textfield',
		            name:'contactName',
		            allowBlank:false,
		            fieldLabel: '联系人'
		        },{
		            xtype: 'textfield',
		            name:'contactPhone',
		            allowBlank:false,
		            fieldLabel: '联系人电话'
		        }]
			}]
		}];
		me.callParent(arguments);
	}
});