/**
 * 部门空间-部门自建任务-审批流程
 */
Ext.define('ExtApp.view.deptworkspace.deptissue.DeptIssueProcessRecord', {
    extend: 'Ext.grid.Panel',
    xtype: 'deptIssueProcessRecord',
    
    requires:[
      'Ext.grid.Panel',
      'Ext.grid.column.Date',
      'Ext.grid.plugin.RowExpander'
	],
	
	//layout:'fit',
	controller:'deptIssueProcessRecord',
	
	cls: 'allRecordsCls notes-grid',
    scrollable: true,
    border: false,
    viewConfig: {
        preserveScrollOnRefresh: true,
        stripeRows: false
    },
	
	initComponent: function() {
		
		this.store = Ext.create('ExtApp.store.deptworkspace.DeptIssueProcessRecordStore');
		this.store.getProxy().extraParams = {issueId: this.issueId};
		this.store.load();

		this.columns = [{
			dataIndex:'title',
			flex:1,
			renderer:'renderTitleColumn'
		}];
	
		this.titleTpl =
	        '<div class="text-wrapper">'+
				'<div class="notes-icon shadow {roleId}">&nbsp;</div>'+
	            '<div class="notes-data">'+
	                '<div class="notes-content">'+
						'<div class="notes-header">'+
							'<span class="notes notes-author"><i class="fa fa-user"></i>{author}</span>'+
							'<span class="notes notes-step"><i class="fa fa-map-marker"></i>{stepId}</span>'+
							'<span class="notes notes-step"><i class="fa fa-arrows-alt"></i>{stepName}</span>'+
						'</div>'+
						'<div class="notes-header">'+
							'<span class="notes notes-time"><i class="fa fa-calendar "></i>{date}&nbsp;{time}</span>'+
						'</div>'+
						'<div class="notes-paragraph" {expanded}>'+
							'<span>{paragraph}</span>'+
						'</div>'+
	                '</div>'+
	            '</div>'+
	        '<div>';
		
		this.callParent(arguments);
	}
});
