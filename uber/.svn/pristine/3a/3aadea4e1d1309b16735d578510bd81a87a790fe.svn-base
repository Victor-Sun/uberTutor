Ext.define('ExtApp.view.myworkspace.task.PmTaskExtensionLog',{
	extend:'Ext.grid.Panel',
	xtype:'pmTaskExtensionLog',
   
    controller: 'pmTaskExtensionLog',
    
    title:'延期变更记录',

    scrollable:true,
 
    initComponent: function() {
    	this.store = Ext.create('ExtApp.store.myworkspace.PmTaskExtensionLogStore');
    	this.store.getProxy().extraParams = {taskId: this.taskId};
    	this.store.load();

    	this.columns = [{
    		text: '变更时间',
    		dataIndex:'time',
    		formatter: 'date("Y/m/d H:i:s")',
    		flex:1,
    		filter: {
	        	type: 'date'
	        }
    	},{
    		text: '延期天数',
        	dataIndex:'delayDays',
        	flex:1
        },{
        	text: '备注',
        	dataIndex:'memo',
        	flex:1
        },{
        	text: '审批证据',
        	dataIndex:'documentName',
        	flex:1,
        	renderer: function(value, metadata, record) {
				if (value) {
					return '<font color="blue"><u>' + value + '</u></font>';
				} else {
					return '';
				}
			},
			listeners: {
				click: 'onFileClick'
			}
        }];
    	this.dockedItems = [{
			xtype: 'pagingtoolbar',
			dock: 'bottom',
			displayInfo: true,
			store: this.store
		}];
    	
    	this.callParent();
    }
});