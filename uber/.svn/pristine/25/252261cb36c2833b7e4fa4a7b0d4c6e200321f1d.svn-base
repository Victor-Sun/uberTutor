/**
 * 项目管理-Open Issue（根）View
 */
Ext.define('ExtApp.view.projectManagement.issue.archiveissue.ArchiveIssue',{
	extend:'Ext.panel.Panel',
	xtype:'archiveIssue',
	controller: 'archiveIssue',
	layout:{
		type: 'vbox',
		align: 'stretch'
	},
	//title:'归档问题',
	initComponent: function() {
		var archiveIssueStore = Ext.create('ExtApp.store.projectmanagement.issue.ArchiveIssueStore');
		archiveIssueStore.load();
	
		this.items = [{
			xtype: 'toolbar',
			cls: 'shadow',
			defaults: {
				labelWidth: 55
			},
			items: [{
				xtype: 'datefield',
				width: 175,
				itemId:'fromDate',
				format:'Y-m-d',
				fieldLabel: '贡献日期'
			},{
				xtype: 'datefield',
				width: 150,
				labelWidth: 25,
				itemId:'toDate',
				format:'Y-m-d',
				fieldLabel: '到'
			},{
				xtype: 'textfield',
				width: 200,
				itemId:'userName',
				fieldLabel: '贡献者'
			},
//			'-',
			{
				xtype: 'textfield',
				width: 200,
				labelWidth: 45,
				itemId:'title',
				fieldLabel: '标题'
			},
			{
				xtype: 'textfield',
				width: 200,
				labelWidth: 45,
				itemId:'programName',
				fieldLabel: '项目'
			},
			'-',
			{
				xtype: 'button',
				text: '搜索',
				handler: 'search'
			},{
				xtype: 'button',
				text: '重置',
				handler: 'reset'
			}]
		},{
			xtype: 'container',
			cls: 'shadow',
			flex: 1,
			layout: {
				type: 'border'
			},
			defaults: {
				cls: 'shadow'
			},
			items: [{
				xtype:'grid',
				cls: 'shadow',
				region: 'center',
				title: '归档问题列表',
				layout:'fit',
				store: archiveIssueStore,
				columns:[{
					text: '贡献者',
					dataIndex: 'userName'
				},{
					text: '贡献日期',
					width: 150,
					dataIndex: 'updateDate'
				},{
					text: '标题',
					dataIndex: 'title',
					flex: 1
//					xtype: 'rownumberer'
//				},{
//					text:'问题标题',
//					flex: 1,
//					dataIndex:'title'
//				},{
//					text:'问题描述',
//					flex: 1,
//					dataIndex:'issueDescription'
//				},{
//					text:'问题原因',
//					flex: 1,
//					dataIndex:'issueCause'
//				},{
//					text:'解决方案',
//					flex: 1,
//					dataIndex:'issueResolution'
				}],
				listeners:{
		        	selectionchange:'onSelectionChange'
				},
				dockedItems: [{
					xtype: 'pagingtoolbar',
					dock: 'bottom',
					displayInfo: true,
					store: archiveIssueStore
				}]
			},{
				// 归档信息 窗口
				xtype: 'form',
				cls: 'shadow',
				collapsible: true,
				region: 'east',
				width: '33%',
				split: true,
				scrollable: 'true',
//				flex: 2,
				title: '归档信息',
//				tools: [{
//					xtype: 'button',
//					text: '打印'
//				}],
				layout: {
					type: 'vbox',
					align: 'stretch'
				},
				defaults: {
					margin: 5
				},
				dockedItems: [{
					xtype: 'toolbar',
					dock: 'top',
					items: [{
						xtype: 'button',
						width: 100,
//						ui: 'normal',
						text: '原始问题',
						iconCls: 'x-fa fa-list-alt',
						handler:'showIssueForm'
					}]
				}],
				items: [{
					xtype: 'container',
					layout: {
						type: 'hbox',
						align: 'stretch'
					},
					defaults: {
						labelWidth: 75,
						margin: 1
					},
					items: [{
				        xtype: 'hiddenfield',
				        name: 'issueId'
				    },{
						xtype: 'textfield',
						flex: 1,
						labelAlign: 'top',
						labelWidth: 75,
						name:'title',
						fieldLabel: '标题'
				    }]
				},{
					xtype: 'container',
					layout: {
						type: 'hbox'
					},
					defaults: {
						xtype: 'textfield',
						labelAlign: 'top',
						flex: 1,
						margin: 1,
						labelWidth: 75
					},
					items: [{
						name:'updateDate',
						fieldLabel: '贡献日期'
					},{
						name:'userName',
						fieldLabel: '贡献者'	
					}]
				},{
					xtype: 'textarea',
					labelAlign: 'top',
					labelWidth: 75,
					height: 75,
					name:'issueDescription',
					fieldLabel: '描述'
				},{
					xtype: 'textarea',
					labelAlign: 'top',
					labelWidth: 75,
					height: 75,
					name:'issueCause',
					fieldLabel: '原因'
				},{
					xtype: 'textarea',
					labelAlign: 'top',
					labelWidth: 75,
					height: 75,
					name:'issueResolution',
					fieldLabel: '贡献备注'
				}]
//				,
//				dockedItems: [{
//					xtype: 'toolbar',
//					style: {
//						'background-color': '#f2f2f2'
//					},
//					cls: 'shadow',
//					dock: 'top',
//					items: [{
//						xtype: 'component',
//						html: '归档信息',
//					},
//					'->',
//					{
//						xtype: 'button',
//						text: '打印'
//					}]
//				}]
			}]
		}];
		this.callParent(arguments);
	}
});