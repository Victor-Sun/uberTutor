/**
 * 个人管理-待办任务-专项任务View
 */
Ext.define('ExtApp.view.myworkspace.TodoListExt',{
	extend:'Ext.tab.Panel',
	xtype:'todoListExt',
	controller: 'todoListExt',
	title:'专项任务',
	layout:'fit',
	initComponent: function() {
		var me = this;
		// 进展状态List
		var todoListExtStore = Ext.create('ExtApp.store.myworkspace.TodoListExtStore');
		todoListExtStore.load();
		todoListExtStore.on('load',function() {
			me.setTitle('项目专项任务<font color="red"><b>（' + todoListExtStore.getTotalCount() + '）</b></font>');   
		});
		
		this.items = [{
			title: '列表',
			xtype: 'grid',
			reference: 'refTodoListExtGrid',
		    selModel: 'checkboxmodel',
			store: todoListExtStore,
			columns:[{
				xtype: 'rownumberer'
			},{
				text:'任务名称',
				dataIndex:'taskName',
				flex: 1
			},{
				text:'任务类型',
				dataIndex:'taskType',
				flex: 1
			},{
				text:'项目',
				dataIndex:'programCode',
				flex: 1
			},{
				text:'车型',
				dataIndex:'vehicleCode',
				flex: 1
			},{
				text:'任务来源',
				dataIndex:'sourceName',
				flex: 1
			},{
				text:'当前阶段',
				dataIndex:'stageName',
				flex: 1
			},{
				text:'状态',
				dataIndex:'lifecycleStatusCode',
				flex: 1
			},{
				text:'任务负责人',
				dataIndex:'taskOwner', 
				flex: 1
			}],
			tbar:['->',{
				text: '移交',
				iconCls: 'fa fa-share',
				handler: 'transferTask'
			}],
			dockedItems: [{
			     xtype: 'pagingtoolbar',
			     dock: 'bottom',
			     displayInfo: true,
			     store: todoListExtStore
			}],
			listeners:{
				itemdblclick: 'itemdblclick'
			}
		}];
		this.callParent();
	}
});

