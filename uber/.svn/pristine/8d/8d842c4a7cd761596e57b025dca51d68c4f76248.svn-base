//原因对策方案批准
Ext.define('ExtApp.view.qualityissuemanagement.qedashboard.step6.IssueStep6Window',{
	extend:'Ext.window.Window',
	xtype:'issueStep6Window',
	maximized: true,
	layout: {
		type: 'border'
	},
	controller: 'myTaskInfo07',
	initComponent: function() {
		var me = this;
		var isMark = me.record.get('isMark')
		var isHidden = true;
		if(me.isMark == 'Y'){
			isHidden = false;
		}
		this.items = [{
			region:'center',
			layout:'border',
    		xtype: 'myTaskInfo07',
    		closable:true,
    		issueId: me.issueId,
    		//ProcessInstanceId: rec.get('processInstanceId'),
			//TaskId: rec.get('taskId'),
    		record:me.record,
			grid: me.grid
        },{
			xtype:'operationLog',
			collapsible: true,
			split: true,
//			flex: 1,
			region:'east',
			width: '20%',
			margin: 0,
			title:'操作日志',
			issueId: me.issueId
		}];
		me.dockedItems = [{
			// 审核确认栏
			xtype:'toolbar',
			dock: 'top',
			cls: 'shadow',
//			renderTo:document.body,
			items:['->',{
				text:'通过',
				itemId:'btnAdopt',
				handler:'sumbmit'
			},{
				text:'回退',
				itemId:'btnFallback',
				handler:'fallback'
			},{
				text:'挂牌',
				hidden: ! me.listingPrivilege,
				handler: function() {
					ExtApp.view.qualityissuemanagement.qedashboard.MyTaskInfoCommonController.listing(me, me.issueId);
				}
			},{
				text:'摘牌',
				hidden: ! me.delListingPrivilege,
				handler: function() {
					ExtApp.view.qualityissuemanagement.qedashboard.MyTaskInfoCommonController.delListing(me, me.issueId);
				}
			},{
				text:'取消挂牌',
				hidden: ! me.undoListingPrivilege,
				handler: function() {
					ExtApp.view.qualityissuemanagement.qedashboard.MyTaskInfoCommonController.undoListing(me, me.issueId);
				}
			},{
				text:'关注',
				itemId:'mark',
				hidden:!isHidden,
				handler:'mark'
			},{
				text:'取消关注',
				itemId:'cancelMark',
				hidden:isHidden,
				handler:'cancelMark'
			}]
		}];   
		this.callParent(arguments);
    }
});