/**
 * 项目管理-项目文档列表View
 */
Ext.define('ExtApp.view.projectmanagement.document.ProjectDocumentList',{
	extend:'Ext.panel.Panel',
	xtype:'projectDocumentList',
	
	controller: 'projectDocumentList',

	layout: 'fit',
	
	initComponent: function() {
		var me = this;
		var store = Ext.create('ExtApp.store.projectmanagement.ProjectDocumentListStore');
		store.getProxy().extraParams = {
			programId: me.programId,
			sourceType: me.sourceType
		};
		store.load();
		
		var hideSourceFlag = false;
		if (me.sourceType && me.sourceType != null && me.sourceType != '') {
			hideSourceFlag = true;
		}
	
		this.items = [{
			xtype: 'grid',
			store: store,
			columns: [{
				xtype: 'rownumberer'
			},{
					text: '文档名称',
					flex: 1,
					dataIndex: 'documentName',
					renderer: 'renderFileLink',
					listeners: {
						click: 'onFileClick'
					}
				},{
					text: '上传人',
					flex: 1,
					dataIndex: 'createBy'
				},{
					text: '上传时间',
					flex: 1,
					dataIndex: 'createDate'
				},{
					text: '文档类型',
					flex: 1,
					dataIndex: 'sourceName',
					hidden: hideSourceFlag
				}],
            tbar: [{
				xtype: 'textfield',
				labelAlign: 'right',
				labelWidth: 70,
				itemId: 'searchDocumentName',
				fieldLabel: '文档名称'
			},{
				text: '查询',
				iconCls: 'x-fa fa-search',
				handler: 'search'
			},{
				text: '重置',
				iconCls: 'x-fa fa-rotate-left',
				handler: 'reloadSearch'
			}],
            dockedItems: [{
                xtype: 'pagingtoolbar',
                dock: 'bottom',
                displayInfo: true,
                store: store
            }]
		}];
		this.callParent(arguments);
	}
});