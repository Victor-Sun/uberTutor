Ext.define('ExtApp.view.common.SysUserCombo',{
	extend: 'Ext.panel.Panel',
	xtype: 'sysUserCombo',
	
	layout: 'fit',
	
	forceSelection: true,
	labelWidth: 100,
	labelAlign: 'left',
	
	initComponent: function() {
		var me = this;
		// 系统用户Store
		var sysUserStore = Ext.create('ExtApp.store.common.SysUserAllStore');
		
		me.items = [{
			xtype: 'combobox',
			fieldLabel: me.fieldLabel,
			store: sysUserStore,
			minChars: 1,
		    pageSize: 0,
		    typeAhead: true,
		    name: me.name,
		    displayField: 'name',
		    forceSelection: me.forceSelection,
		    readOnly: me.readOnly,
            fieldCls: me.fieldCls,
            labelWidth: me.labelWidth,
            labelAlign: me.labelAlign,
            listConfig: {
                getInnerTpl: function() {
                    return '<div class="search-item">' +
		                       '<span class="results-left" style="min-width: 80px;"><h3>{name}</h3></span>' +
		                       '<span class="results-right" style="min-width: 100px;">{departmentName}</span>' +
		                   '</div>';
                }
		    },
		    listeners:{
		         'select': function(combo, record, eOpts){
		        	 combo.setValue(record.get('name'));
		        	 me.up('form').getForm().findField(me.idField).setValue(record.get('id'));
		         }
		    },
            allowBlank: me.allowBlank
		}];
		me.callParent(arguments);
	}
});