/**
 * 个人管理-待办任务-交付物详细
 */
Ext.define('ExtApp.view.myworkspace.task.PmTaskDeliverableDetail',{
	extend:'Ext.window.Window',
	xtype:'pmTaskDeliverableDetail',
	
	layout: 'fit',
	closable: false,
	modal: true,
	width:800,
	height:400,
	
	controller: 'pmTaskDeliverableDetail',

	initComponent: function() {
		
		var editable = (this.viewFlag == 'performance');
		
		this.items = [{
			xtype: 'panel',
			layout: {
				type: 'vbox',
				align: 'stretch'
			},
			items: [{
				xtype:'form',
				margin:10,
			    layout: 'column',
			    height: 150,
				defaults: {
					xtype: 'textfield',
					readOnly: true,
		        	fieldCls: 'text-readonly',
		        	labelAlign: 'top',
		        	margin:2
				},
				items: [{
					xtype: 'textfield',
					columnWidth:0.4,
					fieldLabel: '所属阀门',
					name: 'taskName'
				},{
					xtype: 'textfield',
					columnWidth:0.3,
					fieldLabel: '交付物编号',
					name: 'code'
				},{
					xtype: 'textfield',
					columnWidth:0.3,
					fieldLabel: '交付物名称',
					name: 'name'
				},{
					xtype: 'textareafield',
					fieldLabel: '备注',
					columnWidth:1,
					name: 'memo',
					value: this.memo,
					readOnly: false,
		        	fieldCls: ''
				}]
			},{
				xtype: 'panel',
				layout: 'fit',
				flex: 1,
				items: [{
					xtype: 'fileAttachment',
					programId: this.programId,
		    		sourceType: 'SOURCE_TYPE_TASK_DELIVERBLE',
		    		sourceId: this.deliverableId,
		    		editable: editable,
		    		parentCallerView: 'pmTaskDeliverableDetail'
				}]
			}]
		}];
		
		this.tools = [{
			text:'保存',
			xtype: 'button',
			itemId: 'btnSaveD',
			iconCls: 'x-fa fa-save',
			handler: 'confirm'
		},{
			text:'关闭',
			xtype: 'button',
			iconCls: 'x-fa fa-close',
			handler: 'cancel'
		}];

		this.callParent(arguments);
	}
});