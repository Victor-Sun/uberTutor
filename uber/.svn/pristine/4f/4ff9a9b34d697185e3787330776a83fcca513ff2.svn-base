/**
 * 项目管理-查看历史记录
 */
Ext.define('ExtApp.view.projectManagement.baseline.BiBaselineList',{
	extend:'Ext.window.Window',
	xtype:'biBaselineList',

	controller: 'biBaselineList',
	
	layout: 'fit',
	closable: false,
	
	title: '历史记录',
	
	width:800,
	height:400,
	modal :true,

	initComponent: function() {
		var me = this;
		var store = Ext.create(
			'ExtApp.store.projectmanagement.BaselineListStore');
		store.getProxy().extraParams = {
			programId: this.programId,
			programVehicleId: this.programVehicleId,
			obsId: this.obsId,
			baselineType: 'BI'};
		store.load();
		
		this.items = [{
			xtype: 'panel',
			layout: 'fit',
			items: [{
				xtype: 'grid',
				store: store,
				columns: [{
					xtype : 'rownumberer'
			    },{
			    	text: '标题', 
			    	dataIndex: 'title',
			    	flex:1
			    },{
			    	text: '描述', 
			    	dataIndex: 'note',
			    	flex:1
			    },{
					text: '创建时间',
					width: 150,
					dataIndex: 'createDate',
					formatter: 'date("Y/m/d H:i:s")'
			    }],
			    dockedItems: [{
		            xtype: 'pagingtoolbar',
		            dock: 'bottom',
		            displayInfo: true,
		            store: store
	            }],
				listeners:{
		        	celldblclick: 'onCelldblclick'
				}
			}]
	    }];
		this.tools = [{
			text:'关闭',
			xtype: 'button',
			iconCls: 'x-fa fa-close',
			handler: 'closeWindow'
		}];
		this.callParent();
	}
});