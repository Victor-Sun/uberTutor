/**
 * 项目计划上传Window
 */
Ext.define('ExtApp.view.projectmanagement.extplan.ext201.Ext201Task',{
	extend:'Ext.window.Window',
	xtype:'ext201Task',
	controller: 'ext201Task',
	width:'100%',
	height:'100%',
	title:'任务处理',
	layout: 'fit',	
	fbar: [{
		text: '关闭',
		handler: 'close'
	},{
		text: '完成',
		handler: 'finishedTask'
	}],
	initComponent: function() {
		var me = this;
		var checklist = Ext.create('ExtApp.view.projectmanagement.extplan.ext201.Checklist',{taskId:me.taskId});
		var checklistStore = Ext.create('ExtApp.store.projectmanagement.extplan.ext201.common.Checklist');
		checklist.setStore(checklistStore);
		checklistStore.load({params:{taskId:me.taskId}});
		
		var checklistNotes = Ext.create('ExtApp.view.projectmanagement.extplan.ext201.ChecklistNotes',{taskId:me.taskId});
		var checklistNotesStore = Ext.create('ExtApp.store.projectmanagement.extplan.ext201.common.ChecklistNotes');
		checklistNotes.setStore(checklistNotesStore);
		checklistNotesStore.load({params:{taskId:me.taskId}});
		
		var checklistAllDocumets = Ext.create('ExtApp.view.projectmanagement.extplan.ext201.ChecklistAllDocumets',{taskId:me.taskId});
		var checklistAllDocumentsStore = Ext.create('ExtApp.store.projectmanagement.extplan.ext201.common.ChecklistAllDocuments');
		checklistAllDocumets.setStore(checklistAllDocumentsStore);
		checklistAllDocumentsStore.load({params:{taskId:me.taskId}});
		this.items = [{
		    xtype:'form',
		    url: '/pdms/pm/project-extension-plan!getExt201TaskForm.action',
		    width: 600,
		    bodyPadding: 10,
		    layout:{
				type:'vbox',
				align:'stretch'
			},
		    items: [{
				xtype:'panel',
				padding:10,
				width:'50%',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '项目名称',
					name: 'programName',
					columnWidth: 0.25
		    	},{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '专项项目名称',
					name: 'applicationName',
					columnWidth: 0.25
		    	}]
			},{
				xtype:'panel',
				padding:10,
				width:'50%',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '零件名称',
					name: 'itemName',
					columnWidth: 0.25
		    	},{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '专业',
					name: 'obsName',
					columnWidth: 0.25
		    	}]
			},{
				xtype:'panel',
				padding:10,
				width:'50%',
				layout:{
					type:'hbox',
					align:'stretch'
				},
				items:[{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '专业工程师',
					name: 'userName',
					columnWidth: 0.25
		    	},{
		    		xtype: 'textfield',
					labelAlign: 'right',
					fieldLabel: '当前阶段',
					name: 'stageName',
					columnWidth: 0.25
		    	}]
			},{
				xtype: 'tabpanel',
				margin:10,
				cls:'shadow',
				items:[checklist,checklistNotes,checklistAllDocumets]
			}]
		}];
		this.callParent(arguments);
	}
});