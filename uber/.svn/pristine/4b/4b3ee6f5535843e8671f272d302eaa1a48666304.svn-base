/**
 * 项目管理-项目计划基线详细
 */
Ext.define('ExtApp.view.projectmanagement.baseline.BaselineWindow',{
	extend:'Ext.window.Window',
	xtype:'baselineWindow',
	
	controller: 'baselineWindow',
	
	closable: false,
	width:1000,
	height:600,

	layout:{
		type:'border'
	},
	
	initComponent: function() {
		// 单项目管理权限Store
		this.privilegeStore = Ext.create(
			'ExtApp.store.projectmanagement.ProjectPrivilegeStore');
		this.privilegeStore.getProxy().extraParams = {programId: this.programId};
		this.privilegeStore.load();
		
		var useStore = Ext.create(
			'ExtApp.store.projectmanagement.BaselineTreeStore');
		useStore.getProxy().extraParams = {
			programVehicleId: this.programVehicleId,
			obsId: this.obsId,
			baselineId: this.baselineId};
		useStore.load();
		
		this.items = [{
			margin:'2',
			cls:'shadow',
			region: 'west',
		    width:180,
		    collapsible:'true',
		    region:'west',
		    xtype: 'baselineTree',
		    store: useStore,
		    listeners: {
		    	itemclick: 'onItemClick' 
			}
		},{
			margin:'2',
			cls:'shadow',
			region: 'center',
			xtype: 'panel',
			reference: 'mainCardPanel',
			layout: {
				type: 'card'
			}
		}];
		
		this.tools = [{
			text:'复制为当前计划',
			xtype: 'button',
			itemId: 'BTNCopyPlan',
			iconCls: 'x-fa fa-exchange',
			handler: 'setBaseline',
			hidden: true
		},{
	    	text:'关闭',
	    	xtype: 'button',
	    	iconCls: 'x-fa fa-close',
	    	handler: 'closeWindow'
		}];
		this.callParent();
	}
});