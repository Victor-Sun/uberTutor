Ext.define('ExtApp.view.projectmanagement.extplan.ext301.Ext301CheckpointTmpWindow',{
	xtype:'ext301CheckpointTmpWindow',
	extend:'Ext.window.Window',
	controller:'ext301CheckpointTmp',
	width:500,
	height:400,
	// margin:'65 0 0 250',
	title:'节点角色维护',
	fbar: [
	       { type: 'button', text: '保存', handler: 'onButtonClickSubmit' },
	       { type: 'button', text: '关闭', handler: 'closeWindow' }
	     ],
	initComponent: function() {
		me = this;
		var roles = Ext.create('Ext.data.Store', {
		    fields: ['id', 'name'],
		    data : [
		        {"id":"ENG", "name":"工程师"},
		        {"id":"FM", "name":"专业经理"}
		    ]
		});
		var tempStdObsStore = Ext.create('ExtApp.store.projectmanagement.extplan.ext301.TempStdObsStore');
		tempStdObsStore.load();
    	me.items = [{
			xtype:'form',
			reference: 'issueSourceForm',
			layout:{
				type:'vbox',
				align:'stretch'
			},
			items:[{
		        xtype:'hiddenfield',
		        name: 'id'
			},{
				xtype:'textfield',
				name:'code',
				padding:'10 25 10 30',
				labelAlign:'top', 
				allowBlank:false, 
				fieldLabel:'节点编码'
			},{
				xtype:'textfield',
				name:'title',
				padding:'10 25 10 30',
				labelAlign:'top', 
				allowBlank:false, 
				fieldLabel:'节点名称'
			},{
				xtype : 'combo',
				fieldLabel:'角色名称',
				padding:'10 25 10 30',
				labelAlign:'top', 
				editable: false,
				store: roles,
			    queryMode: 'local',
			    displayField: 'name',
			    valueField: 'id',
				style:'opacity:1;',
				name:'roleCode',
				listeners: {
					change:function(combo, newValue, oldValue, eOpts){
						if(newValue == 'ENG'){
							me.down('form').getForm().findField('respFmGroup').hide();
						}else{
							me.down('form').getForm().findField('respFmGroup').show();
						}

					}
				}
			},{
				xtype : 'combo',
				fieldLabel:'专业组',
				padding:'10 25 10 30',
				labelAlign:'top', 
				editable: false,
				store: tempStdObsStore,
			    queryMode: 'local',
			    displayField: 'obsName',
			    valueField: 'obsName',
				style:'opacity:1;',
				name:'respFmGroup'
			}]
		}];
    	me.callParent(arguments);
	}
});