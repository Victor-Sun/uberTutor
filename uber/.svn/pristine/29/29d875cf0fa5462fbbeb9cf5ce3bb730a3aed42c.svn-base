/**
 * 待办任务-申请计划变更
 */
Ext.define('ExtApp.view.myworkspace.task.PmTaskApplication',{
	extend:'Ext.window.Window',
	xtype:'pmTaskApplication',

	controller: 'pmTaskApplication',

	closable: false,
	width:800,
	height:600,
	scrollable: 'y',
	title:"申请变更",

	initComponent: function() {

		var deptStore = Ext.create(
			'ExtApp.store.myworkspace.TodoListPMTask09Store');
		deptStore.load();

		this.items = [{
			xtype:'form',
			items:[{
				xtype: 'fieldset',
	            title: '申请原因',
				margin:'10 20 10 10',
				width:'100%',
				layout:{
					type:'vbox'
				},
				items:[{
			        xtype: 'checkboxgroup',
			        margin:'10 20 10 20',
					width: '100%',
			        columns: 2,
			        items: [{ 
			        	boxLabel: '网步开发供用商未按计划确认',
			        	margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '1'
			        },{
			        	boxLabel: '设计方案未按计划完成',
				        margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '2'
			        },{
			        	boxLabel: '详细计划未按计划完成',
				        margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '3'
			        },{ 
			        	boxLabel: '样车未按计划交付',
				        margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '4'
			        },{ 
			        	boxLabel: '软件开发/标定未按计划完成',
			        	margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '5'
			        },{ 
			        	boxLabel: '新增设计需求或设变',
				        margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '6'
			        },{ 
			        	boxLabel: '验证未按计划完成',
				        margin:'0 0 0 20',
			        	name: 'rb',
			        	flex: 1,
			        	inputValue: '7'
			        },{ 
			        	xtype:'panel',
				        margin:'0 0 0 20',
						layout:{
							type:'hbox'
						},
						bodyStyle: 'background:#f6f6f6;',
			        	items:[{
				        	xtype: 'checkbox',
				        	reference: 'refOtherCheck',
				        	listeners: {
				        		click : {
						            element: 'el',
						            fn: 'other'
						        }
				        	}
			        	},{
				        	xtype: 'textfield',
				        	reference: 'refOther',
				        	margin:'0 0 0 3',
				        	fieldLabel: '其他',
				        	disabled: true,
				        	name: 'other',
				        	labelWidth: 30
			        	}]
			        }]
			    },{
			    	xtype: 'textareafield',
			    	width: '99%',
					emptyText: '--请输入更改原因--',
					name: 'changReason'
			    }]
			},{
				xtype: 'fieldset',
	            title: '变更内容',
				margin:'10 20 10 10',
				width:'100%',
				layout:{
					type:'vbox'
				},
				items:[{
					xtype:'panel',
					bodyStyle: 'background:#f6f6f6;',
					width:'100%',
					layout:{
						type:'hbox'
					},
					items:[{
						xtype: 'textfield',
						margin:'10 0 10 0',
						fieldLabel: '对应车型',
						readOnly: true,
						width:'30%',
						editable: false,
					    queryMode: 'local',
					    displayField: 'name',
					    valueField: 'id',
						labelAlign: 'right',
					    name: 'programVehicleName'
					},{
						xtype: 'textfield',
						margin:'10 0 10 0',
						width:'30%',
						fieldLabel: '节点名称',
						readOnly: true,
						name: 'taskName',
						labelAlign: 'right'
					},{
						xtype: 'datefield',
						margin:'10 0 10 0',
						width:'30%',
						fieldLabel: '目前计划时间',
						readOnly: true,
						name: 'plannedFinishDate',
						format: 'Y/m/d',
						labelAlign: 'right'
					}]
				},{
					xtype:'panel',
					bodyStyle: 'background:#f6f6f6;',
					layout:{
						type:'hbox'
					},
					width:'100%',
					items:[{
						xtype: 'datefield',
						margin:'10 10 10 0',
						width:'30%',
						fieldLabel: '主计划时间',
						readOnly: true,
						name: 'mainPLanDate',
						format: 'Y/m/d',
						labelAlign: 'right'
					},{
						xtype: 'datefield',
						margin:'10 10 10 0',
						fieldLabel: '申请调整时间',
						width:'30%',
						name: 'changDate',							
						format: 'Y/m/d',
						labelAlign: 'right'
					}]
				}]
			},{
				xtype: 'fieldset',
	            title: '影响',
				margin:'10 20 10 10',
				width:'100%',
				height:400,
			    layout: 'border',
			    items:[{
			    	xtype:'panel',
			    	bodyStyle: 'background:#f6f6f6;',
			    	region:'west',
					width:'30%',
					height:'80%',
			    	items:[{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
						fieldLabel: 'ET试制开始',
						labelWidth: 120,
						items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
					},{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
				    	fieldLabel: '设计认可完成',
				    	labelWidth: 120,
				    	items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
			    	},{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
				    	fieldLabel: 'PT试制开始',
				    	labelWidth: 120,
				    	items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
			    	},{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
				    	fieldLabel: '阀门评审',
				    	labelWidth: 120,
				    	items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
			    	},{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
				    	fieldLabel: '公告获得',
				    	labelWidth: 120,
				    	items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
			    	},{
						xtype: 'radiogroup',
						margin:'10 20 10 10',
				    	fieldLabel: '示范运行/整车SOP',
				    	labelWidth: 120,
				    	items:[{
							inputValue: '0',
							checked:true,
		                    boxLabel: '有'
		                }, {
		                    inputValue: '1',
		                    boxLabel: '无'
		                }]
			    	}]
			    },{
			    	xtype:'panel',
			    	bodyStyle: 'background:#f6f6f6;',
			    	region:'south',
					width:'100%',
					height:'20%',
					items:[{
						xtype:'panel',
						bodyStyle: 'background:#f6f6f6;',
						layout:{
							type:'hbox'
						},
						items:[{
							xtype: 'textfield',
							width:'30%',
							fieldLabel: '费用',
							name: 'cost',
							labelAlign: 'right'
						},{
							xtype: 'textfield',
							width:'30%',
							fieldLabel: '功能',
							name: 'function',
							labelAlign: 'right'
						},{
							xtype: 'textfield',
							width:'30%',
							fieldLabel: '其他',
							name: 'other',
							labelAlign: 'right'
						}]
					}]
		
			    },{
			    	xtype:'panel',
			    	bodyStyle: 'background:#f6f6f6;',
			    	region:'center',
			    	items:[{
				    	xtype: 'textareafield',
				    	width:'99%',
				    	height:'45%',
						emptyText: '--请输入详细说明--',
						name: 'define'
			    	},{
				    	xtype: 'textareafield',
				    	width:'99%',
				    	height:'45%',
						emptyText: '--请输入对其他节点的影响--',
						name: 'nodeInfluence'
			    	}]  	
			    }]
			},{
				xtype: 'fieldset',
	            title: '对应措施',
				margin:'10 20 5 10',
				width:'100%',
				height:150,
				items:[{
					xtype: 'textareafield',
			    	width: '99%',
			    	height:'99%',
					emptyText: '--请输入对应措施--',
					name: 'step'
				}]
			},{
				xtype: 'panel',
				width:'100%',
				bodyStyle: 'background:#f6f6f6;',
				margin:'10 20 10 10',
				items:[{
					xtype: 'textfield',
					margin:'0 0 0 20',
					fieldLabel: '申请组经理',
					labelWidth:100,
					readOnly: true,
					name: 'professionalFieldName'
				},{
					xtype: 'panel',
					width: 400,
					layout: 'fit',
					items: [{
						xtype: 'container',
						items: [{
					        xtype: 'multiselector',
					        title: '需会签专业组',
					        fieldName: 'name',
					        items: [{
					        	dataIndex: 'id',
					        	hidden: true
					        }],

					        viewConfig: {
					            deferEmptyText: false,
					            emptyText: '--请选择专业组--'
					        },
					        search: {
					            store: deptStore
					        }
					    }]
					}]
				}]
			}]
		}];
		this.tbar = [{
			text:'确定',
			iconCls: 'x-fa fa-circle-o',
			handler: 'confirm'
		},{
			text:'取消',
			iconCls: 'x-fa fa-close',
			handler: 'cancel'
		}];
		this.callParent(arguments);
	}
});