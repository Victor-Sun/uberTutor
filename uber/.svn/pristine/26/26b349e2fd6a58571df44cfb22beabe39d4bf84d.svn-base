/**
 * ViewController
 */
Ext.define('ExtApp.view.common.IssueStepViewController',{
    extend: 'Ext.app.ViewController',
    alias: 'controller.issueStepView',
    //关注
    mark: function(button) {
   		var me = this;
	    Ext.Ajax.request({
			url:'/pdms/ims/ims-issue-mark!saveImsIssueMark.action',
			params: {
				keyId: this.view.issueId,
				isConcern: 'Y'
			},
			success: function(response, opts) {
				ExtApp.util.Util.showToast("关注成功！");
				button.hide();
				button.nextSibling('button').show();
				button.up('window').grid.getStore().load();
		    }
	    });
    },

	//取消关注
	cancelMark: function(button) {
		var me = this;
	    Ext.Ajax.request({
			url:'/pdms/ims/ims-issue-mark!saveImsIssueMark.action',
			params: {
				keyId: me.view.issueId,
				isConcern: 'N'
			},
			success: function(response, opts) {
				ExtApp.util.Util.showToast("取消关注成功！");
				button.hide();
				button.previousSibling('button').show();
				button.up('window').grid.getStore().load();
		    }
	    });
	}
});
