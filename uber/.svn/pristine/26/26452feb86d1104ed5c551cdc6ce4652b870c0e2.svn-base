/**
 * 待办任务-交付物
 */
Ext.define('ExtApp.view.myworkspace.task.PmTaskDeliverableController', {
    extend: 'ExtApp.view.common.BaseViewController',
    alias: 'controller.pmTaskDeliverable',
    
    // 双击交付物文件
    onCelldblclick: function(grid , td , cellIndex , record , tr , rowIndex , e , eOpts) {
    	this.gridStore = grid.getStore();
    	var rec = this.gridStore.getAt(rowIndex);
    	this.dialog = Ext.create({
    		xtype:'pmTaskDeliverableDetail',
    		programId: this.view.programId,
    		taskId: this.view.taskId,
    		deliverableId: rec.get('id'),
    		title: rec.get('name'),
    		memo: rec.get('memo'),
    		viewFlag: this.view.viewFlag,
    		parentCaller: this
        });
    	var form = this.dialog.down('form').getForm();
    	form.findField('taskName').setValue(rec.get('taskName'));
    	form.findField('code').setValue(rec.get('code'));
    	form.findField('name').setValue(rec.get('name'));
    	this.dialog.show();
    },
    
    // 交付物详细-确定
    confirmDeliverableDetail: function() {
    	this.gridStore.reload();
    }

});
