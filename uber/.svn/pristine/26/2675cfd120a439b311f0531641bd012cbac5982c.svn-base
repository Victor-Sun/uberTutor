/**
 * 质量问题管理-操作日志
 */
Ext.define('ExtApp.view.qualityissuemanagement.qedashboard.OperationLog',{
    extend: 'Ext.grid.Panel',
    xtype: 'operationLog',
    requires: [
        'Ext.grid.Panel',
        'Ext.toolbar.Paging',
        'Ext.grid.column.Date',
		'Ext.grid.plugin.RowExpander'
    ],
//    controller: 'workOrderNotes',
    cls: 'allRecordsCls notes-grid',
    scrollable: true,
    border: false,
    viewConfig: {
        preserveScrollOnRefresh: true,
        stripeRows: false
    },
    appId:null,
    controller: 'operationLog',
	columns:[{
		dataIndex:'title',
		flex:1,
		renderer:'renderTitleColumn'
	}],
	titleTpl:
    '<div class="text-wrapper">'+
		'<div class="notes-icon shadow {roleId}">&nbsp;</div>'+
        '<div class="notes-data">'+
            '<div class="notes-content">'+
				'<div class="notes-header">'+
					'<span class="notes notes-author"><i class="fa fa-user"></i>用户：{taskOwnerName}</span>'+
				'</div>'+
				'<div class="notes-header">'+
					'<span class="notes notes-step"><i class="fa fa-map-marker"></i>节点：{stepName}</span>'+
				'</div>'+
				'<div class="notes-header">'+
					'<span class="notes notes-author"><i class="fa fa-desktop"></i>操作：{actionName}</span>'+
				'</div>'+
				'<div class="notes-header">'+
					'<span class="notes notes-time"><i class="fa fa-calendar "></i>{createDate}&nbsp;</span>'+
					//'<span class="notes notes-time"><i class="fa fa-clock"></i></span>'+
				'</div>'+
				'<div class="notes-paragraph" >'+
					'<span>{taskComment}</span>'+
				'</div>'+
            '</div>'+
        '</div>'+
    '<div>',
    initComponent: function() {
		me = this;
		var store = Ext.create('ExtApp.store.qualityissuemanagement.OperationLogStore');
		store.getProxy().extraParams = {issueId:me.issueId };
		store.load();
		me.store = store;
	    me.callParent(arguments);
	}
});