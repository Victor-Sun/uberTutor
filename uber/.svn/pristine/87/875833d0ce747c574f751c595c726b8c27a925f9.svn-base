/**
 * 零件信息 Controller
 */
Ext.define('ExtApp.view.qualityissuemanagement.part.ImsPartController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.imsPart',
    raiseIssue:function(){
    	var me = this;
    	var programId = me.getView().programId;
    	var grid = me.getView().down('grid');
    	Ext.create("ExtApp.view.projectManagement.issue.raiseissue.RaiseOpenIssueWindow",{grid:grid}).show();
    },
    renderProgress: function(v) {
    	var img = 'White.png';
    	if (v == 'G') {
    		img = 'Green.png'
    	} else if (v == 'Y') {
    		img = 'Yellow.png'
    	} else if (v == 'R') {
    		img = 'Red.png'
    	} else if (v == 'W') {
    		img = 'White.png'
    	}
        return '<img src="resources/images/' + img + '" width="20px"/>';
    },
    
    // 双击交付物列表
    onCelldblclick: function(grid , td , cellIndex , record , tr , rowIndex , e , eOpts) {
    	var me = this;
    	var rec = grid.getStore().getAt(rowIndex);
    	var programId = me.getView().programId;
    	var grid = me.getView().down('grid');
    	if(rec.get('status') == 'DRAFT'){
    		var win = Ext.create("ExtApp.view.projectManagement.issue.raiseissue.RaiseOpenIssueWindow",{programId:programId,grid:grid,issueId:rec.get('id')}).show();
    		win.down('form').load({params:{issueId:rec.get('id')}});
    	}else if(rec.get('status') == 'COMPLETE'){
    		var win = Ext.create("ExtApp.view.projectManagement.issue.finishedissue.FinishedIssueWindow",{programId:programId,grid:grid,issueId:rec.get('id')}).show();
    		win.down('form').load({params:{issueId:rec.get('id')}});
    	}else{
    		var win = Ext.create("ExtApp.view.projectManagement.issue.confirmissue.ConfirmIssueWindow",{programId:programId,grid:grid,issueId:rec.get('id'),title:'问题信息'}).show();
    		win.down('form').load({params:{issueId:rec.get('id')}});
    	}
    	
    	
    },
    importPart:function(){
    	var win = Ext.create("ExtApp.view.qualityissuemanagement.part.ImsPartImport").show();
    }
});
