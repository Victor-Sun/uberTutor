/**
 * 项目管理-阀门交付物-列表形式
 */
Ext.define('ExtApp.view.projectManagement.cp.PmDeliverableList',{
	extend:'Ext.panel.Panel',
	xtype:'pmDeliverableList',

	controller: 'pmDeliverableList',
	layout: 'fit',
	cls: 'shadow',
//	margin: 10,
	
	initComponent: function() {
		var me = this;
		
		var dStore = Ext.create('ExtApp.store.projectmanagement.PmDeliverableListStore');
		dStore.load({params: {programVehicleId: me.programVehicleId}});

		this.items = [{
			xtype:'grid',
			store: dStore,
			columns:[{
				xtype: 'rownumberer'
			},{
				text:'阀门',
				width:60,
				dataIndex:'taskName'
			},{
				text:'负责主体',
				flex:1,
				dataIndex:'obsName'
			},{
				text:'交付物代号',
				flex:1,
				dataIndex:'code'
			},{
				text:'交付物名称',
				flex:1,
				dataIndex:'name'
			},{
				text:'检查项目',
				flex:1,
				dataIndex:'checkName'
			},{
				text:'单项目通过要求及验收办法',
				flex:1,
				dataIndex:'checkRequirement',
				renderer: 'renderRemark'
			},{
				text:'适用性',
				width:100,
				dataIndex:'isFitName'
			},{
				text:'完成情况',
				width:100,
				dataIndex:'taskProgressStatus',
				renderer: 'renderTaskProgress',
				align: 'center'
			}],
			tbar: [{
				xtype: 'form',
		    	margin: 2,
		    	layout:{
					type:'vbox',
					align:'stretch'
				},
				width: '100%',
				items: [{
					xtype: 'fieldset',
					flex:1,
			    	title: '<B>高级查询</B>',
			    	titleAlign: 'right',
			    	collapsible:true,
			    	collapsed: true,
			    	margin: 2,
			    	layout: 'fit',
			    	items: [{
			    		xtype: 'panel',
			    		layout:{
							type:'vbox',
							align:'stretch'
						},
						items: [{
							xtype: 'panel',
							flex: 1,
				    		layout: 'column',
				    		defaults: {
				    			defaults: {
				    				labelAlign: 'right',
					    			margin: 5
				    			}
				    		},
				    		items: [{
				    			xtype: 'panel',
				    			columnWidth: 0.25,
				    			layout: 'fit',
								items: [{
									xtype: 'textfield',
					    			name: 'searchTaskName',
									fieldLabel: '阀门'
								}]
				    		},{
				    			xtype: 'panel',
				    			columnWidth: 0.25,
				    			layout: 'fit',
								items: [{
									xtype: 'textfield',
					    			name: 'searchObsName',
									fieldLabel: '负责主体'
								}]
				    		},{
				    			xtype: 'panel',
				    			columnWidth: 0.25,
				    			layout: 'fit',
								items: [{
									xtype: 'textfield',
					    			name: 'searchDeliverableCode',
									fieldLabel: '交付物代号'
								}]
				    		},{
				    			xtype: 'panel',
				    			columnWidth: 0.25,
				    			layout: 'fit',
								items: [{
									xtype: 'textfield',
					    			name: 'searchDeliverableName',
									fieldLabel: '交付物名称'
								}]
				    		}]
						},{
							xtype: 'panel',
							flex: 1,
				    		layout: {
				    			type:'hbox',
								align:'stretch'
				    		},
				    		defaults: {
				    			labelAlign: 'right',
				    			labelWidth: 60,
				    			margin: '0 0 0 10',
				    			checked: true,
								labelSeparator: ''
				    		},
				    		items: [{
				    			xtype:'checkbox',
								name:'searchStatus_1',
								fieldLabel:'未开始'
					    	},{
								xtype:'checkbox',
								name:'searchStatus_2',
								fieldLabel:'无风险'
					    	},{
								xtype:'checkbox',
								name:'searchStatus_3',
								fieldLabel:'小风险'
					    	},{
								xtype:'checkbox',
								name:'searchStatus_4',
								fieldLabel:'中风险'
					    	},{
								xtype:'checkbox',
								name:'searchStatus_5',
								fieldLabel:'大风险'
					    	},{
								xtype:'checkbox',
								name:'searchStatus_6',
								fieldLabel:'无法判断'
						    }]
						}]
			    	}]
				},{
					xtype: 'panel',
					margin: '10 2 2 2',
		    		layout:{
						type:'hbox',
						align:'stretch'
					},
					items: [{
						xtype:'checkbox',
						name:'searchIsFit',
						fieldLabel:'适用',
						labelAlign: 'right',
		    			labelWidth: 60,
		    			checked: true,
						labelSeparator: ''
			    	},{
						xtype:'checkbox',
						margin: '0 0 0 10',
						name:'searchIsNotFit',
						fieldLabel:'不适用',
						labelAlign: 'right',
		    			labelWidth: 60,
		    			checked: true,
						labelSeparator: ''
			    	},{
						xtype: 'button',
						margin: '0 0 0 20',
						text: '查询',
						iconCls: 'x-fa fa-search',
						handler: 'search'
					},{
						xtype: 'button',
						margin: '0 0 0 5',
						text: '重置',
						iconCls: 'x-fa fa-rotate-left',
						handler: 'reloadSearch'
			    	},{
			    		xtype:'button',
			    		margin: '0 0 0 5',
			  			text: '导出',
			  			itemId: 'btnExportIssue',
			  			iconCls: 'fa fa-file-excel-o',
			  			handler: 'export2Excel'
			    	}]
				}]
			}],
			dockedItems: [{
				xtype: 'pagingtoolbar',
				dock: 'bottom',
				displayInfo: true,
				store: dStore
			}]
		}];
		this.callParent(arguments);
	}
});